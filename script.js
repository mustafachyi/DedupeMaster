document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("masterlist"),t=document.getElementById("alert"),l=document.getElementById("removed"),n=document.getElementById("output"),o=document.querySelector(".output-group"),r=document.getElementById("kpblanks"),a=document.getElementById("caps"),c=document.getElementById("sort");document.querySelector(".paste-btn").addEventListener("click",function l(){navigator.clipboard.readText().then(t=>{e.value=t}).catch(e=>{console.error("Failed to read clipboard contents: ",e),t.textContent="Failed to read clipboard contents.",t.style.display="block"})}),document.querySelector(".btn").addEventListener("click",function i(){let d=e.value;if(!d.trim()){t.style.display="block";return}t.style.display="none";let s=(d=d.replace(/>/g,"&gt;").replace(/</g,"&lt;")).split("\n"),p={},y={};s.forEach(e=>{if(e=e.trimEnd().replace(/\t/g,"    "),r.checked){if(e.match(/^ +/)){let t=e.match(/^ +/)[0].replace(/ /g," ");e=e.replace(/^\s+/,t)}}else e=e.trimStart();let l=a.checked?e.toLowerCase():e;y[l]=l,p[l]="0"});let m=Object.keys(p).filter(e=>""!==y[e]);c.checked&&m.sort((e,t)=>{let l=e.toUpperCase(),n=t.toUpperCase();return l.localeCompare(n)});let u=m.length,g=m.join("\n"),E=s.length-u;l.textContent=`${s.length} original lines, ${E} removed, ${u} remaining.`,n.textContent=g,o.style.display="block"}),n.addEventListener("click",function e(){n.select(),document.execCommand("copy"),n.style.animation="borderPulse 2s",setTimeout(()=>{n.style.animation=""},2e3)})}),window.onload=function(){masterlist.value="",output.textContent=""};
