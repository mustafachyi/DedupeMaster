document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("masterlist"),t=document.getElementById("alert"),l=document.getElementById("removed"),n=document.getElementById("output"),o=document.querySelector(".output-group"),r=document.getElementById("kpblanks"),a=document.getElementById("caps"),c=document.getElementById("sort");document.querySelector(".btn").addEventListener("click",function i(){let s=e.value;if(!s.trim()){t.style.display="block";return}t.style.display="none";let d=(s=s.replace(/>/g,"&gt;").replace(/</g,"&lt;")).split("\n"),m={},p={};d.forEach(e=>{if(e=e.trimEnd().replace(/\t/g,"    "),r.checked){if(e.match(/^ +/)){let t=e.match(/^ +/)[0].replace(/ /g," ");e=e.replace(/^\s+/,t)}}else e=e.trimStart();let l=a.checked?e.toLowerCase():e;p[l]=l,m[l]="0"});let y=Object.keys(m).filter(e=>""!==p[e]);c.checked&&y.sort((e,t)=>{let l=e.toUpperCase(),n=t.toUpperCase();return l.localeCompare(n)});let g=y.length,u=y.join("\n"),E=d.length-g;l.textContent=`${d.length} original lines, ${E} removed, ${g} remaining.`,n.textContent=u,o.style.display="block"}),n.addEventListener("click",function e(){n.select(),document.execCommand("copy"),n.style.animation="borderPulse 2s",setTimeout(()=>{n.style.animation=""},2e3)})}),window.onload=function(){masterlist.value="",output.textContent=""};
